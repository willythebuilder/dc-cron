{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "dc-cron",
  "main": "src/worker.ts",
  "compatibility_date": "2024-11-01",

  // Dev/default triggers (local or if you omit --env). Feel free to simplify for local testing.
  "triggers": {
    "crons": [
      "0,30 6-23 * * *", //["createDailyChronicles"]
      "15 7-9 * * *", //["processIncompleteChronicles"]
      "*/1 * * * *", //["syncChroniclesUpdates", "syncUserStakes"]
      "0 * * * *", //["provideLiquidity"]
      "*/15 * * * *" //["shieldClean", "recordDacPerformance"]
    ]
  },

  // Non-secret defaults for local dev
  "vars": {
    "BASE_URL": "http://localhost:8888/",
    "ENABLED": "true",
    "INTERNAL_API_KEY": "1418b63e-54e3-4543-a7e3-55340bebeb61",
    "SLACK_WEBHOOK_URL": "" // optional, for job failure alerts
  },

  "observability": { "enabled": true },

  "env": {
    "staging": {
      "triggers": {
        "crons": [
          "0,30 6-23 * * *", //["createDailyChronicles"]
          "15 7-9 * * *", //["processIncompleteChronicles"]
          "*/1 * * * *", //["syncChroniclesUpdates", "syncUserStakes"]
          "0 * * * *", //["provideLiquidity"]
          "*/15 * * * *" //["shieldClean", "recordDacPerformance"]
        ]
      },
      "vars": {
        "BASE_URL": "https://dc-platform-stg-api-578323882369.us-east5.run.app",
        "ENABLED": "false"
      }
    },
    "production": {
      "triggers": {
        "crons": [
          "0,30 6-23 * * *", //["createDailyChronicles"]
          "15 7-9 * * *", //["processIncompleteChronicles"]
          "*/1 * * * *", //["syncChroniclesUpdates", "syncUserStakes"]
          "0 * * * *", //["provideLiquidity"]
          "*/15 * * * *" //["shieldClean", "recordDacPerformance"]
        ]
      },
      "vars": {
        "BASE_URL": "https://dc-platform-stg-api-578323882369.us-east5.run.app",
        "ENABLED": "false"
      }
    }
  }
}
